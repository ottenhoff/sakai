<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <f:view>
        <f:event type="preRenderView" listener="#{portalHeaderConfigurator.configure}" />
        <h:head>
            <ui:fragment rendered="#{not empty requestScope['html.head']}">
                <h:outputText value="#{requestScope['html.head']}" escape="false" />
            </ui:fragment>
            <title>
                <h:outputText value="#{authorFrontDoorMessages.auth_front_door}" />
            </title>
        </h:head>
        <h:body onload="#{requestScope['html.body.onload']}">
            <ui:include src="authorIndex_content.xhtml" />
            <h:outputScript target="body">
//<![CDATA[
(function() {
  if (!window.mojarra) {
    window.mojarra = {};
  }
  if (!window.mojarra.jsfcljs) {
    window.mojarra.jsfcljs = function(form, params, elementId) {
      if (!form) {
        return;
      }
      var appended = [];
      if (params) {
        for (var key in params) {
          if (Object.prototype.hasOwnProperty.call(params, key)) {
            appended.push(addHidden(form, key, params[key]));
          }
        }
      }
      form.submit();
      cleanup(form, appended);
    };
  }

  function addHidden(form, name, value) {
    var input = document.createElement('input');
    input.type = 'hidden';
    input.name = name;
    input.value = value;
    form.appendChild(input);
    return input;
  }

  function cleanup(form, inputs) {
    while (inputs.length) {
      form.removeChild(inputs.pop());
    }
  }
})();
//]]>
            </h:outputScript>
        </h:body>
    </f:view>

</ui:composition>
